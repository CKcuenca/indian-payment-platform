# ğŸ—ï¸ å°åº¦æ”¯ä»˜å¹³å° - æœåŠ¡å™¨æ¶æ„å¤‡å¿˜å½•

## ğŸ“… æ›´æ–°æ—¥æœŸ: 2025-09-11

## ğŸŒ AWSæœåŠ¡å™¨åŸºæœ¬ä¿¡æ¯
- **æœåŠ¡å™¨IP**: `13.200.72.14`
- **SSHè¿æ¥**: `ssh -i /Users/kaka/AWS-Key/indian-payment-key-3.pem ubuntu@13.200.72.14`
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 22.04.5 LTS
- **å†…å­˜**: çº¦23%ä½¿ç”¨ç‡
- **ç£ç›˜**: çº¦39.5%ä½¿ç”¨ç‡

## ğŸ”„ åŒç¯å¢ƒéƒ¨ç½²æ¶æ„è¯¦æƒ…

### ğŸ§ª æµ‹è¯•ç¯å¢ƒ (test.cashgit.com)
```
ç›®å½•: /var/www/test.cashgit.com
PM2 ID: 0
åº”ç”¨å: test-indian-payment-platform
ç«¯å£: 3000
åŸŸå: https://test.cashgit.com
ç”¨é€”: è‡ªåŠ¨éƒ¨ç½²ã€åŠŸèƒ½æµ‹è¯•ã€å¼€å‘éªŒè¯
```

### ğŸš€ ç”Ÿäº§ç¯å¢ƒ (cashgit.com)
```
ç›®å½•: /var/www/cashgit.com
PM2 ID: 1
åº”ç”¨å: indian-payment-platform
ç«¯å£: 3001
åŸŸå: https://cashgit.com
ç”¨é€”: æ­£å¼çº¿ä¸ŠæœåŠ¡ã€å®¢æˆ·ä½¿ç”¨
```

## ğŸ“Š æ•°æ®åº“æ¶æ„
### MongoDBæ•°æ®åº“åˆ—è¡¨
```
admin                          40.00 KiB
cashgit                       220.00 KiB
config                        108.00 KiB
indian-payment-platform        28.00 KiB
indian-payment-platform-test   16.00 KiB
indian_payment_platform       116.00 KiB
local                          72.00 KiB
payment-platform                1.84 MiB  â† ä¸»ç”Ÿäº§æ•°æ®åº“
payment-platform-test         260.00 KiB
test                            8.00 KiB
```

### ç”Ÿäº§æ•°æ®åº“ç”¨æˆ· (payment-platform)
```javascript
// ç®¡ç†å‘˜ç”¨æˆ·
{
  username: 'admin',
  fullName: 'ç³»ç»Ÿç®¡ç†å‘˜',
  role: 'admin',
  status: 'active',
  permissions: [å®Œæ•´ç®¡ç†å‘˜æƒé™]
}

// å•†æˆ·ç”¨æˆ·
{
  username: 'cgpay',
  fullName: 'cgpay',
  role: 'merchant',
  merchantId: 'cgpay',
  status: 'active',
  permissions: [å•†æˆ·æƒé™]
}
```

## âš™ï¸ PM2æœåŠ¡ç®¡ç†

### å½“å‰è¿è¡ŒçŠ¶æ€
```bash
# æ ‡å‡†çŠ¶æ€ï¼ˆä¸¤ä¸ªç¯å¢ƒåŒæ—¶è¿è¡Œï¼‰
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id â”‚ name                         â”‚ ... â”‚ mode    â”‚ pid    â”‚ uptime  â”‚ status â”‚ cpu  â”‚ mem       â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0  â”‚ test-indian-payment-platform â”‚ ... â”‚ fork    â”‚ xxxxx  â”‚ Xm      â”‚ online â”‚ 0%   â”‚ ~100mb    â”‚
â”‚ 1  â”‚ indian-payment-platform      â”‚ ... â”‚ fork    â”‚ xxxxx  â”‚ Xm      â”‚ online â”‚ 0%   â”‚ ~116mb    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¸¸ç”¨ç®¡ç†å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 list

# é‡å¯ç‰¹å®šæœåŠ¡
pm2 restart 0  # æµ‹è¯•ç¯å¢ƒ
pm2 restart 1  # ç”Ÿäº§ç¯å¢ƒ

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
pm2 logs 0 --lines 20  # æµ‹è¯•ç¯å¢ƒ
pm2 logs 1 --lines 20  # ç”Ÿäº§ç¯å¢ƒ

# ç›‘æ§èµ„æºä½¿ç”¨
pm2 monit

# å¯åŠ¨æœåŠ¡ï¼ˆå¦‚æœåœæ­¢ï¼‰
pm2 start /var/www/test.cashgit.com/ecosystem.test.config.js      # æµ‹è¯•
pm2 start /var/www/cashgit.com/ecosystem.config.js --env production  # ç”Ÿäº§
```

## ğŸ”§ ç¯å¢ƒé…ç½®å·®å¼‚

### ç”Ÿäº§ç¯å¢ƒé…ç½® (/var/www/cashgit.com/env.production)
```bash
NODE_ENV=production
PORT=3001
MONGODB_URI=mongodb://localhost:27017/payment-platform
JWT_SECRET=cashgit-jwt-secret-2024-secure
NODE_OPTIONS="--max-old-space-size=1024 --initial-heap-size=512..."
```

### æµ‹è¯•ç¯å¢ƒé…ç½®
- ä½¿ç”¨é»˜è®¤é…ç½®æˆ–ç‹¬ç«‹çš„æµ‹è¯•é…ç½®
- ç«¯å£3000
- å¯èƒ½ä½¿ç”¨ä¸åŒçš„æ•°æ®åº“æˆ–é…ç½®

## ğŸš¨ æ•…éšœæ’æŸ¥æ­¥éª¤

### 1. æœåŠ¡502é”™è¯¯
```bash
# æ£€æŸ¥PM2æœåŠ¡çŠ¶æ€
pm2 list

# å¦‚æœæœåŠ¡åœæ­¢ï¼Œé‡å¯å¯¹åº”æœåŠ¡
pm2 restart 1  # ç”Ÿäº§ç¯å¢ƒ

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs 1 --lines 50
```

### 2. æ•°æ®åº“è¿æ¥é—®é¢˜
```bash
# æ£€æŸ¥MongoDBæœåŠ¡
sudo systemctl status mongod

# é‡å¯MongoDBï¼ˆå¦‚éœ€è¦ï¼‰
sudo systemctl restart mongod

# æµ‹è¯•æ•°æ®åº“è¿æ¥
mongosh
```

### 3. ç«¯å£å†²çªæ£€æŸ¥
```bash
# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 3000  # æµ‹è¯•ç¯å¢ƒ
netstat -tlnp | grep 3001  # ç”Ÿäº§ç¯å¢ƒ

# æ£€æŸ¥Nginxé…ç½®
sudo nginx -t
sudo systemctl status nginx
```

## ğŸ“‹ éƒ¨ç½²å·¥ä½œæµ

### è‡ªåŠ¨éƒ¨ç½²ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰
```
æœ¬åœ°ä»£ç  â†’ GitHubæ¨é€ â†’ GitHub Actions â†’ è‡ªåŠ¨éƒ¨ç½²åˆ°test.cashgit.com
```

### æ‰‹åŠ¨éƒ¨ç½²ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /var/www/cashgit.com
./deploy-production.sh

# æˆ–è€…æ‰‹åŠ¨æ­¥éª¤
git pull origin main
npm install
pm2 restart indian-payment-platform
```

## ğŸ” è®¿é—®å‡­æ®

### SSHè®¿é—®
- å¯†é’¥æ–‡ä»¶: `/Users/kaka/AWS-Key/indian-payment-key-3.pem`
- è¿æ¥å‘½ä»¤: `ssh -i /Users/kaka/AWS-Key/indian-payment-key-3.pem ubuntu@13.200.72.14`

### ç®¡ç†å‘˜ç™»å½•
- ç½‘å€: https://cashgit.com
- ç”¨æˆ·å: `admin`
- å¯†ç : [ç®¡ç†å‘˜å¯†ç ]

### æ•°æ®åº“è®¿é—®
```bash
# åœ¨æœåŠ¡å™¨ä¸Š
mongosh
use payment-platform
db.users.find({})
```

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

1. **åŒç¯å¢ƒéš”ç¦»**: æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒå®Œå…¨ç‹¬ç«‹ï¼Œæ•°æ®ä¸å…±äº«
2. **è‡ªåŠ¨vsæ‰‹åŠ¨**: æµ‹è¯•ç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²ï¼Œç”Ÿäº§ç¯å¢ƒéœ€æ‰‹åŠ¨éƒ¨ç½²ç¡®ä¿ç¨³å®šæ€§
3. **ç«¯å£åˆ†ç¦»**: æµ‹è¯•3000ï¼Œç”Ÿäº§3001ï¼Œé¿å…å†²çª
4. **æ•°æ®å¤‡ä»½**: å®šæœŸå¤‡ä»½payment-platformæ•°æ®åº“
5. **æœåŠ¡ç›‘æ§**: å®šæœŸæ£€æŸ¥PM2æœåŠ¡çŠ¶æ€å’Œèµ„æºä½¿ç”¨æƒ…å†µ
6. **å®‰å…¨æ›´æ–°**: å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œä¾èµ–åŒ…

---
**ğŸ“ å¤‡æ³¨**: æ­¤æ–‡æ¡£è®°å½•äº†æœåŠ¡å™¨çš„å®Œæ•´æ¶æ„ä¿¡æ¯ï¼Œåœ¨è¿›è¡Œä»»ä½•é‡å¤§å˜æ›´å‰è¯·å…ˆæ›´æ–°æ­¤æ–‡æ¡£ã€‚